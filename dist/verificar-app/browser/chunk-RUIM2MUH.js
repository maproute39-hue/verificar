import{a as N}from"./chunk-FH2GJEG6.js";import{g as B,h as F,j as L}from"./chunk-BUT7PQZO.js";import{$a as k,$b as V,Fb as O,Ga as w,Gb as I,Hb as u,Ib as C,Ja as c,Jb as v,Sa as S,W as m,X as f,Xa as M,Y as y,Z as E,ac as T,bc as z,cc as D,dc as H,e as Y,ec as R,fc as $,gb as g,gc as j,hb as e,ib as t,jb as l,lc as U,mb as P,nb as d,ob as b,wb as i,xb as x,yb as _}from"./chunk-Z3T7KZMH.js";var h=Y(U());var Z=(s,r,n,o)=>({"bg-success-subtle text-success":s,"bg-warning-subtle text-warning":r,"bg-danger-subtle text-danger":n,"bg-primary-subtle text-primary":o}),G=s=>["/detail",s];function q(s,r){if(s&1&&(e(0,"a",93),l(1,"i",94),t()),s&2){let n=b().$implicit;g("href","https://wa.me/57"+(n.telefono==null?null:n.telefono.replace(/\D/g,"")),w)}}function J(s,r){if(s&1){let n=P();e(0,"tr",75)(1,"td",76),d("click",function(){let a=m(n).$implicit,p=b();return f(p.viewInspection(a.id))}),i(2),t(),e(3,"td")(4,"div",77)(5,"div",78),l(6,"i",79),e(7,"span"),i(8),t(),k(9,q,2,1,"a",80),t()()(),e(10,"td",76),d("click",function(){let a=m(n).$implicit,p=b();return f(p.viewInspection(a.id))}),e(11,"div",81)(12,"div",82),l(13,"img",83),t(),i(14),t()(),e(15,"td",76),d("click",function(){let a=m(n).$implicit,p=b();return f(p.viewInspection(a.id))}),i(16),u(17,"date"),t(),e(18,"td",76),d("click",function(){let a=m(n).$implicit,p=b();return f(p.viewInspection(a.id))}),e(19,"span",84),i(20),u(21,"titlecase"),t()(),e(22,"td")(23,"div",85),d("click",function(a){return m(n),f(a.stopPropagation())}),e(24,"button",86),l(25,"i",87),t(),e(26,"ul",88)(27,"li")(28,"a",89),d("click",function(a){return m(n),f(a.stopPropagation())}),l(29,"i",90),i(30,"Editar "),t()(),e(31,"li")(32,"a",91),d("click",function(a){let p=m(n).$implicit,W=b();return a.stopPropagation(),f(W.deleteInspection(p.id))}),l(33,"i",92),i(34,"Eliminar "),t()()()()()()}if(s&2){let n=r.$implicit,o=b();c(2),x(n.placa||"Sin placa"),c(6),x(o.formatPhone(n.telefono)),c(),g("ngIf",n.whatsapp),c(4),g("src",n.foto_conductor||"assets/images/avatar/avatar2.webp",w),c(),_(" ",n.nombres_conductor||"Sin nombre"," "),c(2),x(v(17,9,n.fecha_inspeccion,"dd/MM/yyyy")||"Sin fecha"),c(3),g("ngClass",I(14,Z,n.estado==="aprobada",n.estado==="borrador",n.estado==="rechazada",!n.estado)),c(),_(" ",C(21,12,n.estado||"borrador")," "),c(8),g("routerLink",O(19,G,n.id))}}var A=class s{constructor(r,n){this.RealtimeInspectionsService=r;this.router=n}approvedCount=0;rejectedCount=0;inspections=[];totalInspections=0;currentMonthInspections=0;filteredInspections=[];viewInspection(r){if(!r){console.warn("No se proporcion\xF3 un ID de inspecci\xF3n");return}this.router.navigate(["/detail",r])}pending(){h.default.fire({title:"Opcion por implementar",text:"Se implementara en el despliegue final",icon:"warning"})}deleteInspection(r){if(!r){console.warn("No se proporcion\xF3 un ID de inspecci\xF3n para eliminar");return}h.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.RealtimeInspectionsService.deleteInspection(r).then(()=>{h.default.fire("\xA1Eliminado!","La inspecci\xF3n ha sido eliminada.","success")}).catch(o=>{console.error("Error al eliminar la inspecci\xF3n:",o),h.default.fire("Error","No se pudo eliminar la inspecci\xF3n","error")})})}formatPhone(r){if(!r||r.trim()==="")return"Sin tel\xE9fono";let n=r.replace(/\D/g,"");if(n.length===0)return"Sin tel\xE9fono";if(n.length===10)return`(${n.slice(0,3)}) ${n.slice(3,6)} ${n.slice(6)}`;if(n.length===7)return`(${n.slice(0,3)}) ${n.slice(3)}`;if(n.length===12&&n.startsWith("57")){let o=n.slice(2);return`(${o.slice(0,3)}) ${o.slice(3,6)} ${o.slice(6)}`}return r}stopPropagation(r){r.stopPropagation()}ngOnInit(){this.initializeData()}initializeData(){this.RealtimeInspectionsService.inspections$.subscribe({next:r=>{this.inspections=r,this.totalInspections=r.length,this.currentMonthInspections=r.filter(n=>{if(!n.fecha_inspeccion)return!1;let o=new Date(n.fecha_inspeccion),a=new Date;return o.getMonth()===a.getMonth()&&o.getFullYear()===a.getFullYear()}).length},error:r=>{console.error("Error al cargar inspecciones:",r)}})}static \u0275fac=function(n){return new(n||s)(S(N),S(B))};static \u0275cmp=M({type:s,selectors:[["app-home"]],decls:144,vars:11,consts:[[1,"app-wrapper"],[1,"container-fluid"],[1,"app-page-head","d-flex","align-items-center","justify-content-between"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["href","index.html",1,"text-lg"],[1,"fi","fi-rr-home"],["aria-current","page",1,"breadcrumb-item","active","text-blue","text-lg"],[1,"row"],[1,"col-xxl-6","col-lg-6","col-5"],[1,""],[1,"card",2,"min-height","200px"],[1,"card-header","d-flex","align-items-center","justify-content-between","border-0","pb-0"],[1,"clearfix"],[1,"d-none","d-lg-flex","align-items-center","gap-2","position-relative"],["type","checkbox","id","desktop-fab-check",1,"fab-check"],["for","desktop-fab-check",1,"btn","btn-primary","waves-effect","waves-light"],[1,"fi","fi-rr-plus","me-1"],[1,"fab-options","d-flex","flex-column",2,"bottom","auto","top","100%","right","0","left","auto","transform-origin","top right","z-index","1050"],["routerLink","/busetas",1,"fab-option"],[1,"fab-label"],[1,"fab-option-icon"],["routerLink","/nueva",1,"fab-option"],[1,"fab-option",3,"click"],[1,"fab-label","text-warning"],[1,"card-body","py-0","d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-center","gap-2"],[1,"mb-0","text-blue"],["id","chartContacts",1,"mb-n4","mt-n3"],[1,"card-footer","border-0","pt-0","mt-n1"],[1,"border-top","pb-2"],[1,"d-flex","align-items-center","justify-content-between"],[1,"mb-0"],[1,"text-blue",2,"font-size","20px"],[1,"btn-link"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.5","d","M3.33301 9.375C2.98783 9.375 2.70801 9.65483 2.70801 10C2.70801 10.3452 2.98783 10.625 3.33301 10.625V9.375ZM3.33301 10.625H16.6663V9.375H3.33301V10.625Z","fill","var(--bs-primary)"],["d","M11.667 5L16.667 10L11.667 15","stroke","var(--bs-primary)","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"col-xxl-6","col-lg-6","col-7"],[1,"col-12"],[1,"card","overflow-hidden","bg-primary","border-0","ovarlay-primary-gradient",2,"background-image","url(assets/images/auth/auth-frame.webp)","background-position","center","background-size","cover","min-height","200px"],[1,"card-header","pb-3","border-0","d-flex","align-items-center","justify-content-between","z-1","position-relative"],[1,"card-title","mb-0","text-white","d-none","d-lg-block"],[1,"d-flex","d-lg-none","gap-4","align-items-center","h-100"],[1,"d-flex","flex-column","align-items-center"],[1,"text-white","fw-bold","fs-3"],[1,"badge","bg-blue","text-white","rounded-pill","px-3","py-1"],[1,"card-body","pt-0","border-light","border-bottom","border-opacity-10","d-none","d-lg-block"],[1,"mb-5","mt-n3","z-n1","position-relative"],["id","statusChart"],[1,"px-4","mb-3","d-flex","align-items-start","justify-content-between"],[1,"mb-0","text-white"],[1,"text-white","text-opacity-50","mb-0"],[1,"col-xxl-12"],[1,"card","overflow-hidden"],[1,"card-header","d-flex","align-items-center","justify-content-between","border-0","pb-0",2,"flex-wrap","nowrap"],[1,"card-title","mb-0"],["id","dt_NewCustomers_Search"],["type","button","routerLink","/inspections",1,"btn","btn-primary","waves-effect","waves-light"],[1,"fi","fi-rr-eye","text-2xs","me-1"],[1,"card-body","px-1","pt-2","pb-2"],[1,"table-responsive"],["id","dt_NewCustomers",1,"table","table-border-bottom-0","mb-0"],[1,"minw-75px"],[1,"minw-180px"],[1,"minw-200px"],[1,"minw-125px"],["class","inspection-row",4,"ngFor","ngForOf"],[1,"floating-action","d-lg-none"],["type","checkbox","id","fab-check",1,"fab-check"],["for","fab-check",1,"fab"],[1,"fab-icon"],[1,"fab-icon-close"],[1,"fab-options"],[1,"inspection-row"],[3,"click"],[1,"phone-cell"],[1,"d-flex","align-items-center","mb-1"],[1,"fi","fi-rr-phone","me-2","text-primary"],["target","_blank","class","whatsapp-link btn btn-sm btn-success-subtle","title","Contactar por WhatsApp",3,"href",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-xxs","rounded-circle","me-2"],["alt","Foto del conductor",1,"img-fluid",3,"src"],[1,"badge","badge-lg",3,"ngClass"],[1,"btn-group","float-end",3,"click"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-subtle-primary","btn-sm","btn-shadow","btn-icon","waves-effect","dropdown-toggle"],[1,"fi","fi-rr-menu-dots"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click","routerLink"],[1,"fi","fi-rr-edit","me-2"],["href","javascript:void(0);",1,"dropdown-item","text-danger",3,"click"],[1,"fi","fi-rr-trash","me-2"],["target","_blank","title","Contactar por WhatsApp",1,"whatsapp-link","btn","btn-sm","btn-success-subtle",3,"href"],[1,"fi","fi-brands-whatsapp","me-1"]],template:function(n,o){n&1&&(e(0,"main",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5)(6,"a",6),l(7,"i",7),i(8," Verificar "),t()(),e(9,"li",8),i(10,"Revisiones"),t()()()(),e(11,"div",9)(12,"div",10)(13,"div",9)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"h6"),i(19," TOTAL:"),t()(),e(20,"div",15),l(21,"input",16),e(22,"label",17),l(23,"i",18),i(24," Nueva inspeccion "),t(),e(25,"div",19)(26,"a",20)(27,"span",21),i(28,"Busetas"),t(),e(29,"span",22),i(30,"1"),t()(),e(31,"a",23)(32,"span",21),i(33,"Camioneta"),t(),e(34,"span",22),i(35,"2"),t()(),e(36,"a",24),d("click",function(){return o.pending()}),e(37,"span",25),i(38,"Pesados"),t(),e(39,"span",22),i(40,"3"),t()()()()(),e(41,"div",26)(42,"div",27)(43,"h2",28),i(44),u(45,"number"),t()(),l(46,"div",29),t(),e(47,"div",30),l(48,"div",31),e(49,"div",32)(50,"p",33),i(51,"Este mes: "),e(52,"span",34),i(53),u(54,"number"),t()(),e(55,"a",35),y(),e(56,"svg",36),l(57,"path",37)(58,"path",38),t()()()()()()()(),E(),e(59,"div",39)(60,"div",9)(61,"div",40)(62,"div",41)(63,"div",42)(64,"h6",43),i(65,"Distribuci\xF3n"),t(),e(66,"div",44)(67,"div",45)(68,"span",46),i(69,"1"),t(),e(70,"span",47),i(71,"Apr."),t()(),e(72,"div",45)(73,"span",46),i(74,"0"),t(),e(75,"span",47),i(76,"Rech."),t()()()(),e(77,"div",48)(78,"div",49),l(79,"div",50),t(),e(80,"div",51)(81,"div",45)(82,"h3",52),i(83,"1"),t(),e(84,"p",53),i(85,"Aprobadas"),t()(),e(86,"div",45)(87,"h3",52),i(88,"0"),t(),e(89,"p",53),i(90,"Rechazadas"),t()()()()()()()(),e(91,"div",54)(92,"div",55)(93,"div",56)(94,"h6",57),i(95,"Recientes"),t(),e(96,"div",27),l(97,"div",58),e(98,"button",59),l(99,"i",60),i(100," Ver todas "),t()()(),e(101,"div",61)(102,"div",62)(103,"table",63)(104,"thead")(105,"tr")(106,"th",64),i(107,"Placa"),t(),e(108,"th",65),i(109,"Tel\xE9fono"),t(),e(110,"th",66),i(111,"Conductor"),t(),e(112,"th",67),i(113,"Fecha"),t(),e(114,"th"),i(115,"Status"),t(),e(116,"th"),i(117,"Accion"),t()()(),e(118,"tbody"),k(119,J,35,21,"tr",68),u(120,"async"),t()()()()()()()(),e(121,"div",69),l(122,"input",70),e(123,"label",71)(124,"span",72),i(125,"+"),t(),e(126,"span",73),i(127,"\xD7"),t()(),e(128,"div",74)(129,"a",20)(130,"span",21),i(131,"Busetas"),t(),e(132,"span",22),i(133,"1"),t()(),e(134,"a",23)(135,"span",21),i(136,"Camioneta"),t(),e(137,"span",22),i(138,"2"),t()(),e(139,"a",24),d("click",function(){return o.pending()}),e(140,"span",25),i(141,"Pesados"),t(),e(142,"span",22),i(143,"3"),t()()()()()),n&2&&(c(44),x(v(45,3,o.totalInspections,"1.0-0")),c(9),_(" ",v(54,6,o.currentMonthInspections,"1.0-0")," "),c(66),g("ngForOf",C(120,9,o.RealtimeInspectionsService.inspections$)))},dependencies:[j,V,T,z,L,F,D,$,H,R],styles:[".inspection-row[_ngcontent-%COMP%]{transition:all .3s ease;cursor:pointer}.inspection-row[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a;z-index:1;position:relative}.btn[_ngcontent-%COMP%]{cursor:pointer}.badge[_ngcontent-%COMP%]{padding:.5em .8em;font-size:.85em;font-weight:500;border-radius:.25rem}.badge.bg-soft-primary[_ngcontent-%COMP%]{background-color:#0d6efd1a;color:#0f0369}[_nghost-%COMP%]     .table-responsive{min-height:250px!important}[_nghost-%COMP%]     .inspection-row{height:65px!important}[_nghost-%COMP%]     .dropdown-menu{z-index:9999!important}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#25d366;font-weight:500;transition:all .2s}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#128c7e;text-decoration:underline!important}.text-blue[_ngcontent-%COMP%]{color:#1300af!important;font-weight:900}.bg-blue[_ngcontent-%COMP%], [data-bs-theme=dark][_ngcontent-%COMP%]   .bg-blue[_ngcontent-%COMP%]{color:#fff!important;background-color:#0f0369!important}",".floating-action[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;z-index:1000}.fab[_ngcontent-%COMP%]{width:56px;height:56px;background-color:var(--bs-primary);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:2rem;font-weight:300;cursor:pointer;box-shadow:0 2px 10px #0003;transition:all .3s ease;-webkit-user-select:none;user-select:none;position:relative}.fab[_ngcontent-%COMP%]:hover{background-color:var(--bs-primary);transform:scale(1.1)}.fab-icon-close[_ngcontent-%COMP%]{position:absolute;opacity:0;transform:rotate(-45deg);transition:all .3s ease}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%]{opacity:0;transform:rotate(45deg)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]   .fab-icon-close[_ngcontent-%COMP%]{opacity:1;transform:rotate(0)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]{background-color:var(--bs-primary)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]:hover{background-color:var(--bs-primary)}.fab-check[_ngcontent-%COMP%]{display:none}.fab-options[_ngcontent-%COMP%]{position:absolute;bottom:70px;right:0;opacity:0;transform:scale(0);transform-origin:bottom right;transition:all .3s ease;display:flex;flex-direction:column;gap:10px}.fab-check[_ngcontent-%COMP%]:checked ~ .fab-options[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.fab-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;text-decoration:none;color:#333}.fab-label[_ngcontent-%COMP%]{background:#fff;padding:8px 12px;border-radius:20px;margin-right:10px;font-size:.85rem;white-space:nowrap;box-shadow:0 2px 5px #0000001a}.fab-option-icon[_ngcontent-%COMP%]{width:40px;height:40px;background-color:var(--bs-primary);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}@media(min-width:992px){.floating-action[_ngcontent-%COMP%]{display:none}}"]})};export{A as Home};
