import{a as z}from"./chunk-6NHHNGIW.js";import{a as Y}from"./chunk-S4HUSSB2.js";import{d as L,e as A,g as F}from"./chunk-TJG4SBPD.js";import{Ca as E,Ha as I,La as C,Lb as O,Mb as T,Ob as D,Pb as R,Qb as H,Rb as j,Sa as v,Sb as B,Ta as e,U as c,Ua as t,V as m,Va as r,W as w,X as S,Za as M,_a as p,ab as _,d as q,gb as i,hb as b,ib as f,pb as P,rb as V,sa as k,sb as u,tb as y,ua as d,ub as x}from"./chunk-BTCSVDUW.js";var g=q(Y());var Z=(s,a,n,o)=>({"bg-success-subtle text-success":s,"bg-warning-subtle text-warning":a,"bg-danger-subtle text-danger":n,"bg-primary-subtle text-primary":o}),G=s=>["/detail",s];function U(s,a){if(s&1){let n=M();e(0,"tr",86),p("click",function(){let l=c(n).$implicit,h=_();return m(h.viewInspection(l.id))}),e(1,"td",87),p("click",function(l){return c(n),m(l.stopPropagation())}),e(2,"div",88)(3,"input",89),p("click",function(l){return c(n),m(l.stopPropagation())}),t()()(),e(4,"td")(5,"div",90)(6,"div",91),r(7,"img",92),t(),i(8),t()(),e(9,"td"),i(10),t(),e(11,"td"),i(12),t(),e(13,"td"),i(14),u(15,"date"),t(),e(16,"td")(17,"span",93),i(18),u(19,"titlecase"),t()(),e(20,"td")(21,"div",94),p("click",function(l){return c(n),m(l.stopPropagation())}),e(22,"button",95),r(23,"i",96),t(),e(24,"ul",44)(25,"li")(26,"a",97),p("click",function(l){return c(n),m(l.stopPropagation())}),r(27,"i",98),i(28,"Editar "),t()(),e(29,"li")(30,"a",99),p("click",function(l){let h=c(n).$implicit,$=_();return l.stopPropagation(),m($.deleteInspection(h.id))}),r(31,"i",100),i(32,"Eliminar "),t()()()()()()}if(s&2){let n=a.$implicit;d(7),v("src",n.foto_conductor||"assets/images/avatar/avatar1.webp",k),d(),f(" ",n.nombres_conductor||"Sin nombre"," "),d(2),b(n.placa||"Sin placa"),d(2),b(n.telefono||"Sin tel\xE9fono"),d(2),b(x(15,8,n.fecha_inspeccion,"dd/MM/yyyy")||"Sin fecha"),d(3),v("ngClass",V(13,Z,n.estado==="aprobada",n.estado==="pendiente",n.estado==="rechazada",!n.estado)),d(),f(" ",y(19,11,n.estado||"Pendiente")," "),d(8),v("routerLink",P(18,G,n.id))}}var N=class s{constructor(a,n){this.RealtimeInspectionsService=a;this.router=n}inspections=[];totalInspections=0;currentMonthInspections=0;filteredInspections=[];viewInspection(a){if(!a){console.warn("No se proporcion\xF3 un ID de inspecci\xF3n");return}this.router.navigate(["/detail",a])}deleteInspection(a){if(!a){console.warn("No se proporcion\xF3 un ID de inspecci\xF3n para eliminar");return}g.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.RealtimeInspectionsService.deleteInspection(a).then(()=>{g.default.fire("\xA1Eliminado!","La inspecci\xF3n ha sido eliminada.","success")}).catch(o=>{console.error("Error al eliminar la inspecci\xF3n:",o),g.default.fire("Error","No se pudo eliminar la inspecci\xF3n","error")})})}stopPropagation(a){a.stopPropagation()}ngOnInit(){this.initializeData()}initializeData(){this.RealtimeInspectionsService.inspections$.subscribe({next:a=>{this.inspections=a,this.totalInspections=a.length,this.currentMonthInspections=a.filter(n=>{if(!n.fecha_inspeccion)return!1;let o=new Date(n.fecha_inspeccion),l=new Date;return o.getMonth()===l.getMonth()&&o.getFullYear()===l.getFullYear()}).length},error:a=>{console.error("Error al cargar inspecciones:",a)}})}static \u0275fac=function(n){return new(n||s)(E(z),E(L))};static \u0275cmp=I({type:s,selectors:[["app-home"]],decls:166,vars:16,consts:[[1,"app-wrapper"],[1,"container-fluid"],[1,"app-page-head","d-flex","align-items-center","justify-content-between"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["href","index.html"],[1,"fi","fi-rr-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-xxl-8","col-lg-8"],[1,"col-xxl-4","col-md-6"],[1,"card"],[1,"card-header","d-flex","align-items-center","justify-content-between","border-0","pb-0"],[1,"clearfix"],[1,"d-flex","align-items-center","gap-2"],["type","button","routerLink","/nueva",1,"btn","btn-primary","waves-effect","waves-light"],[1,"fi","fi-rr-plus","me-1"],[1,"card-body","py-0","d-flex","align-items-start","justify-content-between"],[1,"mb-0"],["id","chartContacts",1,"mb-n4","mt-n3"],[1,"card-footer","border-0","pt-0","mt-n1"],[1,"border-top","pb-2"],[1,"d-flex","align-items-center","justify-content-between"],[1,"btn-link"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.5","d","M3.33301 9.375C2.98783 9.375 2.70801 9.65483 2.70801 10C2.70801 10.3452 2.98783 10.625 3.33301 10.625V9.375ZM3.33301 10.625H16.6663V9.375H3.33301V10.625Z","fill","var(--bs-primary)"],["d","M11.667 5L16.667 10L11.667 15","stroke","var(--bs-primary)","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"card-body"],[1,"mb-4"],[1,"d-flex","justify-content-between","mb-2"],[1,"text-2xs"],[1,"text-primary","fw-semibold"],["role","progressbar","aria-label","Barra de progreso","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress","progress-sm"],[1,"progress-bar","progress-bar-striped","progress-bar-animated",2,"width","70%"],[1,"d-grid","text-1xs"],[1,"d-flex","gap-1","align-items-center","py-1","mx-1"],[1,"fa","fa-square","text-primary","text-opacity-25","me-1"],[1,"fa","fa-square","text-primary","text-opacity-50","me-1"],[1,"maxw-100px","ratio","ratio-1x1"],["id","chartTasksOverview"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-action-primary","btn-sm","btn-icon","waves-effect","dropdown-toggle"],[1,"fi","fi-bs-menu-dots"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0);",1,"dropdown-item"],[1,"card-body","pt-0"],[1,"badge","badge-sm","bg-success-subtle","text-success"],[1,"card-footer","border-0","pt-0"],["href","javascript:void(0);",1,"btn-link"],[1,"col-xxl-4","col-lg-4"],[1,"col-12"],[1,"card","overflow-hidden","bg-primary","border-0","ovarlay-primary-gradient",2,"background-image","url(assets/images/auth/auth-frame.webp)","background-position","center","background-size","cover"],[1,"card-header","pb-0","border-0","d-flex","align-items-center","justify-content-between","z-1","position-relative"],[1,"card-title","mb-0","text-white"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","btn-icon","text-white","waves-effect","dropdown-toggle"],[1,"card-body","pt-0","border-light","border-bottom","border-opacity-10"],[1,"mb-5","mt-n3","z-n1","position-relative"],["id","statusChart"],[1,"text-white","mt-n5","text-center"],[1,"px-4","mb-3","d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-start","gap-2"],[1,"py-1"],[1,"text-white","fa-solid","fa-square"],[1,"mb-0","text-white"],[1,"text-white","text-opacity-50","mb-0"],[1,"p-1"],[1,"text-white","text-opacity-50","fa-solid","fa-square"],[1,"col-xxl-12"],[1,"card","overflow-hidden"],[1,"card-header","d-flex","flex-wrap","gap-3","align-items-center","justify-content-between","border-0","pb-0"],[1,"card-title","mb-0"],[1,"d-flex","flex-wrap","gap-2"],["id","dt_NewCustomers_Search"],["type","button","routerLink","/inspections",1,"btn","btn-sm","btn-secondary","waves-effect"],[1,"fi","fi-rr-eye","text-2xs","me-1"],[1,"card-body","px-1","pt-2","pb-2"],["id","dt_NewCustomers",1,"table","table-sm","display","table-row-rounded","data-row-checkbox"],[1,"table-light"],[1,"pe-0"],[1,"form-check"],["data-row-checkbox","","type","checkbox",1,"form-check-input"],[1,"minw-200px"],[1,"minw-150px"],[1,"minw-125px"],["class","inspection-row",3,"click",4,"ngFor","ngForOf"],[1,"inspection-row",3,"click"],[1,"pe-0",3,"click"],[1,"form-check","p-0","w-auto","d-inline-block","mb-0","mb-n1"],["data-checkbox","","type","checkbox",1,"form-check-input","m-0",3,"click"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-xxs","rounded-circle","me-2"],["alt","Foto del conductor",1,"img-fluid",3,"src"],[1,"badge","badge-lg",3,"ngClass"],[1,"btn-group","float-end",3,"click"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-subtle-primary","btn-sm","btn-shadow","btn-icon","waves-effect","dropdown-toggle"],[1,"fi","fi-rr-menu-dots"],[1,"dropdown-item",3,"click","routerLink"],[1,"fi","fi-rr-edit","me-2"],["href","javascript:void(0);",1,"dropdown-item","text-danger",3,"click"],[1,"fi","fi-rr-trash","me-2"]],template:function(n,o){n&1&&(e(0,"main",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5)(6,"a",6),r(7,"i",7),i(8," Home "),t()(),e(9,"li",8),i(10,"Dashboard"),t()()()(),e(11,"div",9)(12,"div",10)(13,"div",9)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"h6"),i(19,"TOTAL REVISIONES"),t()(),e(20,"div",15)(21,"button",16),r(22,"i",17),i(23," Nueva inspeccion "),t()()(),e(24,"div",18)(25,"div",15)(26,"h2",19),i(27),u(28,"number"),t()(),r(29,"div",20),t(),e(30,"div",21),r(31,"div",22),e(32,"div",23)(33,"p",19),i(34),u(35,"number"),t(),e(36,"a",24),w(),e(37,"svg",25),r(38,"path",26)(39,"path",27),t()()()()()(),S(),e(40,"div",11)(41,"div",12)(42,"div",28)(43,"div",29)(44,"div",30)(45,"h6",19),i(46,"APROBADAS"),t(),e(47,"span",31),i(48,"Total de inspecciones "),e(49,"span",32),i(50),t()()(),e(51,"div",33),r(52,"div",34),t()(),e(53,"div",23)(54,"div",35)(55,"div",36),r(56,"i",37),i(57," En progreso "),t(),e(58,"div",36),r(59,"i",38),i(60," Pendientes "),t()(),e(61,"div",39),r(62,"canvas",40),t()()()()(),e(63,"div",11)(64,"div",12)(65,"div",13)(66,"div",14)(67,"h6"),i(68,"RECHAZADAS"),t()(),e(69,"div",41)(70,"button",42),r(71,"i",43),t(),e(72,"ul",44)(73,"li")(74,"a",45),i(75,"Editar"),t()(),e(76,"li")(77,"a",45),i(78,"Eliminar"),t()()()()(),e(79,"div",46)(80,"div",15)(81,"h2",19),i(82,"0"),t(),e(83,"span",47),i(84,"0"),t()()(),e(85,"div",48),r(86,"div",22),e(87,"div",23)(88,"p",19),i(89,"Vs mes anterior: 1,195"),t(),e(90,"a",49),w(),e(91,"svg",25),r(92,"path",26)(93,"path",27),t()()()()()()()(),S(),e(94,"div",50)(95,"div",9)(96,"div",51)(97,"div",52)(98,"div",53)(99,"h6",54),i(100,"Total Earning"),t(),e(101,"div",41)(102,"button",55),r(103,"i",43),t(),e(104,"ul",44)(105,"li")(106,"a",45),i(107,"Editar"),t()(),e(108,"li")(109,"a",45),i(110,"Eliminar"),t()()()()(),e(111,"div",56)(112,"div",57),r(113,"div",58),e(114,"div",59),i(115),u(116,"number"),t()(),e(117,"div",60)(118,"div",61)(119,"div",62),r(120,"i",63),t(),e(121,"div",14)(122,"h3",64),i(123,"1"),t(),e(124,"p",65),i(125,"Aprobadas"),t()()(),e(126,"div",61)(127,"div",66),r(128,"i",67),t(),e(129,"div",14)(130,"h3",64),i(131,"0"),t(),e(132,"p",65),i(133,"Rechazadas"),t()()()()()()()()(),e(134,"div",68)(135,"div",69)(136,"div",70)(137,"h6",71),i(138,"Inspecciones recientes"),t(),e(139,"div",72),r(140,"div",73),e(141,"button",74),r(142,"i",75),i(143," Ver todas "),t()()(),e(144,"div",76)(145,"table",77)(146,"thead",78)(147,"tr")(148,"th",79)(149,"div",80),r(150,"input",81),t()(),e(151,"th",82),i(152,"Conductor"),t(),e(153,"th",83),i(154,"Placa del veh\xEDculo"),t(),e(155,"th",83),i(156,"Telefono"),t(),e(157,"th",84),i(158,"Fecha"),t(),e(159,"th"),i(160,"Status"),t(),e(161,"th"),i(162,"Accion"),t()()(),e(163,"tbody"),C(164,U,33,20,"tr",85),u(165,"async"),t()()()()()()()()),n&2&&(d(27),b(x(28,5,o.totalInspections,"1.0-0")),d(7),f("\xDAltimas del mes: ",x(35,8,o.currentMonthInspections,"1.0-0")),d(16),b(o.totalInspections),d(65),f("",x(116,11,o.totalInspections,"1.0-0")," Inspecciones"),d(49),v("ngForOf",y(165,14,o.RealtimeInspectionsService.inspections$)))},dependencies:[B,O,T,F,A,D,j,R,H],styles:[".inspection-row[_ngcontent-%COMP%]{transition:all .3s ease;cursor:pointer}.inspection-row[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a;z-index:1;position:relative}.inspection-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;transition:background-color .3s ease}.inspection-row[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#f8f9fa}.btn[_ngcontent-%COMP%]{cursor:pointer}.badge[_ngcontent-%COMP%]{padding:.5em .8em;font-size:.85em;font-weight:500;border-radius:.25rem}.badge.bg-soft-primary[_ngcontent-%COMP%]{background-color:#0d6efd1a;color:#0d6efd}"]})};export{N as Home};
