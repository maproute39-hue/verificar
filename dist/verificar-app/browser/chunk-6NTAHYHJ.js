import{a as R}from"./chunk-FH2GJEG6.js";import{g as V,h as j,j as A}from"./chunk-BUT7PQZO.js";import{b as Y,d as W,g as $,q}from"./chunk-7NPJAAOY.js";import{$a as P,$b as N,Ab as y,Bb as I,Cb as w,Gb as S,Hb as C,Ib as E,Ja as l,Jb as T,Sa as x,W as d,X as f,Xa as M,ac as D,bc as L,dc as z,e as H,ec as B,gb as u,gc as F,hb as e,ib as t,jb as s,lc as J,mb as v,nb as p,ob as _,wb as i,xb as b,yb as k,zb as O}from"./chunk-Z3T7KZMH.js";var g=H(J());var K=(m,o,n,r)=>({"bg-success-subtle text-success":m,"bg-warning-subtle text-warning":o,"bg-danger-subtle text-danger":n,"bg-primary-subtle text-primary":r});function Q(m,o){if(m&1){let n=v();e(0,"tr",51),p("click",function(){let c=d(n).$implicit,a=_();return f(a.viewInspection(c.id))}),e(1,"td",35)(2,"div",52)(3,"input",53),p("click",function(c){return d(n),f(c.stopPropagation())}),t()()(),e(4,"td")(5,"div",54)(6,"div",55),s(7,"i",56),t(),e(8,"span",57),i(9),t()()(),e(10,"td")(11,"span",58),i(12),t()(),e(13,"td")(14,"span",30),i(15),t()(),e(16,"td")(17,"span",30),i(18),C(19,"date"),t()(),e(20,"td")(21,"span",59),i(22),C(23,"titlecase"),t()(),e(24,"td",60)(25,"div",61)(26,"button",62),p("click",function(c){let a=d(n).$implicit,h=_();return c.stopPropagation(),f(h.viewInspection(a.id))}),s(27,"i",63),t(),e(28,"button",64),p("click",function(c){return d(n),f(c.stopPropagation())}),s(29,"i",65),t(),e(30,"button",66),p("click",function(c){let a=d(n).$implicit,h=_();return f(h.deleteInspection(c,a.id))}),s(31,"i",67),t()()()()}if(m&2){let n=o.$implicit;l(9),b(n.nombres_conductor||"N/A"),l(3),b(n.placa||"N/A"),l(3),b(n.telefono||"N/A"),l(3),b(n.fecha_inspeccion?T(19,6,n.fecha_inspeccion,"dd/MM/yyyy"):"N/A"),l(3),u("ngClass",S(11,K,n.estado==="aprobada",n.estado==="borrador",n.estado==="rechazada",!n.estado)),l(),k(" ",E(23,9,n.estado||"borrador")," ")}}function U(m,o){m&1&&(e(0,"tr")(1,"td",68)(2,"div",69),s(3,"i",70),e(4,"p",29),i(5,"No se encontraron inspecciones"),t(),e(6,"small",30),i(7,"Intenta con otros t\xE9rminos de b\xFAsqueda"),t()()()())}var G=class m{constructor(o,n){this.realtimeInspectionsService=o;this.router=n}inspections=[];totalInspections=0;currentMonthInspections=0;filteredInspections=[];searchTerm="";ngOnInit(){this.initializeData()}pending(){g.default.fire({title:"Opcion por implementar",text:"Se implementara en el despliegue final",icon:"warning"})}initializeData(){this.realtimeInspectionsService.inspections$.subscribe({next:o=>{this.inspections=o,this.filteredInspections=[...o],this.totalInspections=o.length,this.currentMonthInspections=o.filter(n=>{if(!n.fecha_inspeccion)return!1;let r=new Date(n.fecha_inspeccion),c=new Date;return r.getMonth()===c.getMonth()&&r.getFullYear()===c.getFullYear()}).length},error:o=>{console.error("Error al cargar inspecciones:",o)}})}onSearch(){if(!this.searchTerm.trim()){this.filteredInspections=[...this.inspections];return}let o=this.searchTerm.toLowerCase().trim();this.filteredInspections=this.inspections.filter(n=>n.id_inspeccion?.toLowerCase().includes(o)||n.estado?.toLowerCase().includes(o)||n.vehiculo?.placa?.toLowerCase().includes(o)||n.vehiculo?.marca?.toLowerCase().includes(o)||n.vehiculo?.modelo?.toLowerCase().includes(o))}viewInspection(o){if(!o){console.error("No se pudo obtener el ID de la inspecci\xF3n");return}this.router.navigate(["/detail",o])}async deleteInspection(o,n){if(o.stopPropagation(),!n){console.error("No se pudo obtener el ID de la inspecci\xF3n");return}if((await g.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"})).isConfirmed)try{await this.realtimeInspectionsService.deleteInspection(n),g.default.fire({title:"Eliminada",text:"La inspecci\xF3n ha sido eliminada",icon:"success",confirmButtonText:"Aceptar"})}catch(c){console.error("Error al eliminar la inspecci\xF3n:",c),g.default.fire({title:"Error",text:"No se pudo eliminar la inspecci\xF3n",icon:"error",confirmButtonText:"Aceptar"})}}static \u0275fac=function(n){return new(n||m)(x(R),x(V))};static \u0275cmp=M({type:m,selectors:[["app-inspections"]],decls:91,vars:5,consts:[[1,"app-wrapper"],[1,"container-fluid"],[1,"app-page-head","d-flex","align-items-center","justify-content-between"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["routerLink","/"],[1,"fi","fi-rr-home"],["aria-current","page",1,"breadcrumb-item","active2"],[1,"d-none","d-lg-flex","gap-2"],[1,"search-box","position-relative"],["type","text","placeholder","Buscar inspecciones...",1,"form-control","ps-5",3,"ngModelChange","input","ngModel"],[1,"fi","fi-rr-search","position-absolute",2,"left","15px","top","50%","transform","translateY(-50%)"],[1,"d-flex","align-items-center","gap-2","position-relative"],["type","checkbox","id","inspections-fab-check",1,"fab-check"],["for","inspections-fab-check",1,"btn","btn-primary","waves-effect","waves-light"],[1,"fi","fi-rr-plus","me-1"],[1,"fab-options","d-flex","flex-column",2,"bottom","auto","top","100%","right","0","left","auto","transform-origin","top right","z-index","1050"],["routerLink","/busetas",1,"fab-option",3,"click"],[1,"fab-label"],[1,"fab-option-icon"],["routerLink","/nueva",1,"fab-option",3,"click"],[1,"fab-option",3,"click"],[1,"fab-label","text-warning"],[1,"d-block","d-lg-none"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-header","d-flex","align-items-center","justify-content-between"],[1,"mb-0"],[1,"text-muted"],[1,"card-body","px-1","pt-2","pb-2"],[1,"table-responsive"],["id","dt_Inspections",1,"table","table-sm","display","table-row-rounded","data-row-checkbox"],[1,"table-light"],[1,"pe-0"],[1,"form-check"],["data-row-checkbox","","type","checkbox",1,"form-check-input"],[1,"minw-200px"],[1,"minw-150px"],[1,"minw-125px"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"floating-action","d-lg-none"],["type","checkbox","id","fab-check",1,"fab-check"],["for","fab-check",1,"fab"],[1,"fab-icon"],[1,"fab-icon-close"],[1,"fab-options"],["routerLink","/busetas",1,"fab-option"],["routerLink","/nueva",1,"fab-option"],[2,"cursor","pointer",3,"click"],[1,"form-check","p-0","w-auto","d-inline-block","mb-0","mb-n1"],["data-checkbox","","type","checkbox",1,"form-check-input","m-0",3,"click"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-circle","avatar-xs","me-2"],[1,"fi","fi-rr-user"],[1,"fw-semibold"],[1,""],[1,"badge","badge-lg",3,"ngClass"],[1,"text-center"],[1,"d-flex","gap-2","justify-content-center"],["title","Ver",1,"btn","btn-sm","btn-icon","btn-soft-primary",3,"click"],[1,"fi","fi-rr-eye"],["title","Editar",1,"btn","btn-sm","btn-icon","btn-soft-info",3,"click"],[1,"fi","fi-rr-edit"],["title","Eliminar",1,"btn","btn-sm","btn-icon","btn-soft-danger",3,"click"],[1,"fi","fi-rr-trash"],["colspan","9",1,"text-center","py-4"],[1,"d-flex","flex-column","align-items-center"],[1,"fi","fi-rr-search-alt","text-muted","mb-2",2,"font-size","2rem"]],template:function(n,r){n&1&&(e(0,"main",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5)(6,"a",6),s(7,"i",7),i(8," Inicio "),t()(),e(9,"li",8),i(10,"Listado de Inspecciones"),t()()(),e(11,"div",9)(12,"div",10)(13,"input",11),w("ngModelChange",function(a){return I(r.searchTerm,a)||(r.searchTerm=a),a}),p("input",function(){return r.onSearch()}),t(),s(14,"i",12),t(),e(15,"div",13),s(16,"input",14),e(17,"label",15),s(18,"i",16),i(19," Nueva Inspecci\xF3n "),t(),e(20,"div",17)(21,"a",18),p("click",function(a){return a.stopPropagation()}),e(22,"span",19),i(23,"Busetas"),t(),e(24,"span",20),i(25,"1"),t()(),e(26,"a",21),p("click",function(a){return a.stopPropagation()}),e(27,"span",19),i(28,"Camioneta"),t(),e(29,"span",20),i(30,"2"),t()(),e(31,"a",22),p("click",function(){return r.pending()})("click",function(a){return a.stopPropagation()}),e(32,"span",23),i(33,"Pesados"),t(),e(34,"span",20),i(35,"3"),t()()()()(),s(36,"div",24),t(),e(37,"div",25)(38,"div",26)(39,"div",27)(40,"div",28)(41,"h5",29),i(42,"Inspecciones"),t(),e(43,"div",30),i(44),t()(),e(45,"div",31)(46,"div",32)(47,"table",33)(48,"thead",34)(49,"tr")(50,"th",35)(51,"div",36),s(52,"input",37),t()(),e(53,"th",38),i(54,"Conductor"),t(),e(55,"th",39),i(56,"Placa del veh\xEDculo"),t(),e(57,"th",39),i(58,"Tel\xE9fono"),t(),e(59,"th",40),i(60,"Fecha"),t(),e(61,"th"),i(62,"Status"),t(),e(63,"th"),i(64,"Acci\xF3n"),t()()(),e(65,"tbody"),P(66,Q,32,16,"tr",41)(67,U,8,0,"tr",42),t()()()()()()()(),e(68,"div",43),s(69,"input",44),e(70,"label",45)(71,"span",46),i(72,"+"),t(),e(73,"span",47),i(74,"\xD7"),t()(),e(75,"div",48)(76,"a",49)(77,"span",19),i(78,"Busetas"),t(),e(79,"span",20),i(80,"1"),t()(),e(81,"a",50)(82,"span",19),i(83,"Camioneta"),t(),e(84,"span",20),i(85,"2"),t()(),e(86,"a",22),p("click",function(){return r.pending()}),e(87,"span",23),i(88,"Pesados"),t(),e(89,"span",20),i(90,"3"),t()()()()()),n&2&&(l(13),y("ngModel",r.searchTerm),l(31),O(" Total: ",r.totalInspections," | Este mes: ",r.currentMonthInspections," "),l(22),u("ngForOf",r.filteredInspections),l(),u("ngIf",r.filteredInspections.length===0))},dependencies:[F,N,D,L,A,j,q,Y,W,$,z,B],styles:[".table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a;z-index:1;position:relative}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;transition:background-color .3s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#f8f9fa}.btn[_ngcontent-%COMP%]{cursor:pointer}.badge[_ngcontent-%COMP%]{padding:.5em .8em;font-size:.85em;font-weight:500;border-radius:.25rem}.badge.bg-soft-primary[_ngcontent-%COMP%]{background-color:#0d6efd1a;color:green}.active2[_ngcontent-%COMP%]{color:#0f0175!important;font-weight:900!important;font-size:16px!important}.search-box[_ngcontent-%COMP%]{position:relative}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:40px}.search-box[_ngcontent-%COMP%]   .fi-rr-search[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#6c757d;pointer-events:none}#inspections-fab-check[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%], #inspections-fab-check[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .fab-text[_ngcontent-%COMP%]{display:none}#inspections-fab-check[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .fab-close-icon[_ngcontent-%COMP%], #inspections-fab-check[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   .close-text[_ngcontent-%COMP%]{display:inline-block!important}.fab-close-icon[_ngcontent-%COMP%], .close-text[_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%]{gap:.5rem}.btn[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]   .fab-close-icon[_ngcontent-%COMP%]{font-size:1rem;line-height:1}.btn[_ngcontent-%COMP%]   .fab-text[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]   .close-text[_ngcontent-%COMP%]{font-size:.875rem}.btn-primary[_ngcontent-%COMP%]{min-width:150px;justify-content:center}#inspections-fab-check[_ngcontent-%COMP%]:checked ~ .fab-options[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.btn-primary[_ngcontent-%COMP%]:hover   .fab-icon[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:hover   .fab-close-icon[_ngcontent-%COMP%]{transform:none}.fab-options[_ngcontent-%COMP%]{pointer-events:auto}.btn[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:active{box-shadow:none!important}",".floating-action[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;z-index:1000}.fab[_ngcontent-%COMP%]{width:56px;height:56px;background-color:var(--bs-primary);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:2rem;font-weight:300;cursor:pointer;box-shadow:0 2px 10px #0003;transition:all .3s ease;-webkit-user-select:none;user-select:none;position:relative}.fab[_ngcontent-%COMP%]:hover{background-color:var(--bs-primary);transform:scale(1.1)}.fab-icon-close[_ngcontent-%COMP%]{position:absolute;opacity:0;transform:rotate(-45deg);transition:all .3s ease}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%]{opacity:0;transform:rotate(45deg)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]   .fab-icon-close[_ngcontent-%COMP%]{opacity:1;transform:rotate(0)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]{background-color:var(--bs-primary)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]:hover{background-color:var(--bs-primary)}.fab-check[_ngcontent-%COMP%]{display:none}.fab-options[_ngcontent-%COMP%]{position:absolute;bottom:70px;right:0;opacity:0;transform:scale(0);transform-origin:bottom right;transition:all .3s ease;display:flex;flex-direction:column;gap:10px}.fab-check[_ngcontent-%COMP%]:checked ~ .fab-options[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.fab-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;text-decoration:none;color:#333}.fab-label[_ngcontent-%COMP%]{background:#fff;padding:8px 12px;border-radius:20px;margin-right:10px;font-size:.85rem;white-space:nowrap;box-shadow:0 2px 5px #0000001a}.fab-option-icon[_ngcontent-%COMP%]{width:40px;height:40px;background-color:var(--bs-primary);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}@media(min-width:992px){.floating-action[_ngcontent-%COMP%]{display:none}}"]})};export{G as Inspections};
