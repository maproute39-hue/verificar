import{a as I}from"./chunk-HY2UKKWV.js";import{f as v}from"./chunk-SL65TR4P.js";import{a as x,c as y,d as S,e as E,f as D,g as k,l as B,p as F}from"./chunk-LRBWCEYN.js";import{$a as w,Ea as u,Ja as P,Ua as C,V as l,Va as n,W as p,Wa as o,Xa as m,Yb as V,_a as b,e as U,eb as O,hb as s,lb as f,mb as h,nb as M,wa as c}from"./chunk-QCVMPDFW.js";var g=U(V());var L=class _{constructor(t,e){this.router=t;this.authService=e;this.loginData.email="david@appverificar.site",this.loginData.password="appverificar0126"}loginData={email:"",password:""};showPassword=!1;errorMessage="";isSubmitting=!1;ngOnInit(){if(this.authService.isAuthenticated()){let t=this.authService.getCurrentUser();if(t){let e=this.router.parseUrl(this.router.url).queryParams.returnUrl;e?this.router.navigateByUrl(e):this.redirectByRole(t)}}}togglePassword(){this.showPassword=!this.showPassword;let t=document.getElementById("loginPassword");t&&(t.type=this.showPassword?"text":"password")}async onSubmit(){if(!this.loginData.email.trim()||!this.loginData.password.trim()){await g.default.fire({title:"Campos incompletos",text:"Por favor ingresa email/usuario y contrase\xF1a",icon:"warning",confirmButtonText:"Entendido"});return}this.errorMessage="",this.isSubmitting=!0;try{let t=await this.authService.login(this.loginData.email,this.loginData.password),e=this.router.parseUrl(this.router.url).queryParams.returnUrl||"/";await g.default.fire({title:"\xA1Inicio de sesi\xF3n exitoso!",text:`Bienvenido, ${t.name||t.email}`,icon:"success",confirmButtonText:"Continuar",timer:1500,timerProgressBar:!0,showConfirmButton:!1}),e&&e!=="/"?this.router.navigateByUrl(e):this.redirectByRole(t)}catch(t){let e=t.message||"Credenciales inv\xE1lidas. Por favor verifica tus datos.";await g.default.fire({title:"Error de autenticaci\xF3n",text:e,icon:"error",confirmButtonText:"Entendido"}),console.error("Error de autenticaci\xF3n:",t)}finally{this.isSubmitting=!1}}redirectByRole(t){t.role==="admin"?this.router.navigate(["/admin"]):this.router.navigate(["/home"])}clearForm(){this.loginData.email="",this.loginData.password="",this.errorMessage="",this.showPassword=!1;let t=document.getElementById("loginPassword");t&&(t.type="password")}static \u0275fac=function(e){return new(e||_)(u(v),u(I))};static \u0275cmp=P({type:_,selectors:[["app-login"]],decls:31,vars:3,consts:[["loginForm","ngForm"],[1,"auth-frame-wrapper"],[1,"row","g-0","h-100"],[1,"col-xl-8","col-lg-7","col-md-6"],[1,"auth-frame",2,"background-image","url(../assets/images/auth/auth-frame.webp)"],[1,"col-xl-4","col-lg-5","col-md-6","align-self-center"],[1,"p-4","p-sm-5","maxw-450px","m-auto"],[1,"mb-4","text-center"],["routerLink","/home","aria-label","NexLink logo"],["src","../assets/images/logo.svg","alt","NexLink logo",1,"visible-light"],[1,"text-center","mb-5"],[1,"mb-1"],[3,"ngSubmit"],[1,"mb-4"],["for","loginEmail",1,"form-label"],["type","email","id","loginEmail","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","loginPassword",1,"form-label"],[1,"password-wrapper"],["type","password","id","loginPassword","name","password","required","",1,"form-control","password-input",3,"ngModelChange","ngModel"],["type","button","id","togglePassword","aria-pressed","false","aria-label","Mostrar contrase\xF1a","title","Mostrar contrase\xF1a",1,"toggle-password",3,"click"],["aria-hidden","true",1,"close","fi","fi-rr-eye-crossed"],["aria-hidden","true",1,"open","fi","fi-rr-eye"],[1,"mb-3"],["type","submit",1,"btn","btn-primary","waves-effect","waves-light","w-100",3,"disabled"]],template:function(e,i){if(e&1){let a=b();n(0,"div",1)(1,"div",2)(2,"div",3),m(3,"div",4),o(),n(4,"div",5)(5,"div",6)(6,"div",7)(7,"a",8),m(8,"img",9),o()(),n(9,"div",10)(10,"h5",11),s(11,"Bienvenido a Verificar"),o(),n(12,"p"),s(13,"Inicia sesi\xF3n para acceder a tu panel de administraci\xF3n seguro. "),o()(),n(14,"form",12,0),w("ngSubmit",function(){return l(a),p(i.onSubmit())}),n(16,"div",13)(17,"label",14),s(18,"Correo Electr\xF3nico"),o(),n(19,"input",15),M("ngModelChange",function(r){return l(a),h(i.loginData.email,r)||(i.loginData.email=r),p(r)}),o()(),n(20,"div",13)(21,"label",16),s(22,"Contrase\xF1a"),o(),n(23,"div",17)(24,"input",18),M("ngModelChange",function(r){return l(a),h(i.loginData.password,r)||(i.loginData.password=r),p(r)}),o(),n(25,"button",19),w("click",function(){return l(a),p(i.togglePassword())}),m(26,"i",20)(27,"i",21),o()()(),n(28,"div",22)(29,"button",23),s(30," Iniciar Sesi\xF3n "),o()()()()()()()}if(e&2){let a=O(15);c(19),f("ngModel",i.loginData.email),c(5),f("ngModel",i.loginData.password),c(5),C("disabled",!a.form.valid)}},dependencies:[F,k,x,y,S,B,D,E],styles:['@charset "UTF-8";.swal2-popup[_ngcontent-%COMP%]{font-family:Roboto,sans-serif!important;border-radius:12px!important;box-shadow:0 10px 40px #00000026!important;overflow:hidden!important;padding:2rem!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-title[_ngcontent-%COMP%]{font-size:1.5rem!important;font-weight:600!important;color:#333!important;margin-bottom:1rem!important;padding:0!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-html-container[_ngcontent-%COMP%]{font-size:1rem!important;color:#555!important;line-height:1.5!important;margin:0!important;padding:0!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-actions[_ngcontent-%COMP%]{margin:1.5rem auto .5rem!important;padding:0!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-actions[_ngcontent-%COMP%]   .swal2-confirm[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff!important;border:none!important;border-radius:6px!important;padding:.75rem 2rem!important;font-size:.95rem!important;font-weight:600!important;cursor:pointer!important;transition:all .3s cubic-bezier(.4,0,.2,1)!important;box-shadow:0 4px 12px #667eea4d!important;min-width:120px!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-actions[_ngcontent-%COMP%]   .swal2-confirm[_ngcontent-%COMP%]:hover{transform:translateY(-2px)!important;box-shadow:0 6px 16px #667eea66!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-actions[_ngcontent-%COMP%]   .swal2-confirm[_ngcontent-%COMP%]:active{transform:translateY(0)!important;box-shadow:0 2px 8px #667eea4d!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-actions[_ngcontent-%COMP%]   .swal2-confirm[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea!important;outline-offset:2px!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-actions[_ngcontent-%COMP%]   .swal2-cancel[_ngcontent-%COMP%]{background-color:#f5f5f5!important;color:#333!important;border:none!important;border-radius:6px!important;padding:.75rem 2rem!important;font-size:.95rem!important;font-weight:500!important;cursor:pointer!important;margin-left:.5rem!important;transition:all .3s ease!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-actions[_ngcontent-%COMP%]   .swal2-cancel[_ngcontent-%COMP%]:hover{background-color:#e0e0e0!important;transform:translateY(-1px)!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-actions[_ngcontent-%COMP%]   .swal2-cancel[_ngcontent-%COMP%]:active{transform:translateY(0)!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-icon[_ngcontent-%COMP%]{margin:1rem auto!important;border-width:3px!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-icon.swal2-success[_ngcontent-%COMP%]{border-color:#667eea!important;color:#667eea!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-icon.swal2-success[_ngcontent-%COMP%]   .swal2-success-ring[_ngcontent-%COMP%]{border-color:#667eea!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-icon.swal2-error[_ngcontent-%COMP%]{border-color:#ff6b6b!important;color:#ff6b6b!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-icon.swal2-error[_ngcontent-%COMP%]   [class^=swal2-x-mark-line][_ngcontent-%COMP%]{background-color:#ff6b6b!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-icon.swal2-warning[_ngcontent-%COMP%]{border-color:#ff9800!important;color:#ff9800!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-icon.swal2-info[_ngcontent-%COMP%]{border-color:#2196f3!important;color:#2196f3!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-icon.swal2-question[_ngcontent-%COMP%]{border-color:#9c27b0!important;color:#9c27b0!important}@media(prefers-color-scheme:dark){.swal2-popup[_ngcontent-%COMP%]{background-color:#2d2d2d!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-title[_ngcontent-%COMP%]{color:#f5f5f5!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-html-container[_ngcontent-%COMP%]{color:#e0e0e0!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-cancel[_ngcontent-%COMP%]{background-color:#424242!important;color:#fff!important}.swal2-popup[_ngcontent-%COMP%]   .swal2-cancel[_ngcontent-%COMP%]:hover{background-color:#555!important}}']})};export{L as Login};
