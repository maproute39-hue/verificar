import{a as N}from"./chunk-VWUSJTPT.js";import{f as B,g as F,i as L}from"./chunk-SL65TR4P.js";import{$a as d,Ea as _,Ja as C,Mb as V,Na as P,Nb as D,Pb as T,Qb as H,Rb as R,Sb as j,Tb as z,Ua as b,V as p,Va as e,W as m,Wa as t,X as S,Xa as c,Y as y,Yb as Z,_a as M,ab as w,e as Y,hb as i,ib as u,jb as x,qb as I,sb as O,tb as f,ua as E,ub as k,vb as h,wa as l}from"./chunk-QCVMPDFW.js";var g=Y(Z());var G=(s,r,n,o)=>({"bg-success-subtle text-success":s,"bg-warning-subtle text-warning":r,"bg-danger-subtle text-danger":n,"bg-primary-subtle text-primary":o}),U=s=>["/detail",s];function q(s,r){if(s&1){let n=M();e(0,"tr",76),d("click",function(){let a=p(n).$implicit,v=w();return m(v.viewInspection(a.id))}),e(1,"td",77),d("click",function(a){return p(n),m(a.stopPropagation())}),e(2,"div",78)(3,"input",79),d("click",function(a){return p(n),m(a.stopPropagation())}),t()()(),e(4,"td")(5,"div",80)(6,"div",81),c(7,"img",82),t(),i(8),t()(),e(9,"td"),i(10),t(),e(11,"td"),i(12),t(),e(13,"td"),i(14),f(15,"date"),t(),e(16,"td")(17,"span",83),i(18),f(19,"titlecase"),t()(),e(20,"td")(21,"div",84),d("click",function(a){return p(n),m(a.stopPropagation())}),e(22,"button",85),c(23,"i",86),t(),e(24,"ul",87)(25,"li")(26,"a",88),d("click",function(a){return p(n),m(a.stopPropagation())}),c(27,"i",89),i(28,"Editar "),t()(),e(29,"li")(30,"a",90),d("click",function(a){let v=p(n).$implicit,$=w();return a.stopPropagation(),m($.deleteInspection(v.id))}),c(31,"i",91),i(32,"Eliminar "),t()()()()()()}if(s&2){let n=r.$implicit;l(7),b("src",n.foto_conductor||"assets/images/avatar/avatar1.webp",E),l(),x(" ",n.nombres_conductor||"Sin nombre"," "),l(2),u(n.placa||"Sin placa"),l(2),u(n.telefono||"Sin tel\xE9fono"),l(2),u(h(15,8,n.fecha_inspeccion,"dd/MM/yyyy")||"Sin fecha"),l(3),b("ngClass",O(13,G,n.estado==="aprobada",n.estado==="pendiente",n.estado==="rechazada",!n.estado)),l(),x(" ",k(19,11,n.estado||"Pendiente")," "),l(8),b("routerLink",I(18,U,n.id))}}var A=class s{constructor(r,n){this.RealtimeInspectionsService=r;this.router=n}approvedCount=0;rejectedCount=0;inspections=[];totalInspections=0;currentMonthInspections=0;filteredInspections=[];viewInspection(r){if(!r){console.warn("No se proporcion\xF3 un ID de inspecci\xF3n");return}this.router.navigate(["/detail",r])}pending(){g.default.fire({title:"Opcion por implementar",text:"Se implementara en el despliegue final",icon:"warning"})}deleteInspection(r){if(!r){console.warn("No se proporcion\xF3 un ID de inspecci\xF3n para eliminar");return}g.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.RealtimeInspectionsService.deleteInspection(r).then(()=>{g.default.fire("\xA1Eliminado!","La inspecci\xF3n ha sido eliminada.","success")}).catch(o=>{console.error("Error al eliminar la inspecci\xF3n:",o),g.default.fire("Error","No se pudo eliminar la inspecci\xF3n","error")})})}stopPropagation(r){r.stopPropagation()}ngOnInit(){this.initializeData()}initializeData(){this.RealtimeInspectionsService.inspections$.subscribe({next:r=>{this.inspections=r,this.totalInspections=r.length,this.currentMonthInspections=r.filter(n=>{if(!n.fecha_inspeccion)return!1;let o=new Date(n.fecha_inspeccion),a=new Date;return o.getMonth()===a.getMonth()&&o.getFullYear()===a.getFullYear()}).length},error:r=>{console.error("Error al cargar inspecciones:",r)}})}static \u0275fac=function(n){return new(n||s)(_(N),_(B))};static \u0275cmp=C({type:s,selectors:[["app-home"]],decls:145,vars:11,consts:[[1,"app-wrapper"],[1,"container-fluid"],[1,"app-page-head","d-flex","align-items-center","justify-content-between"],["aria-label","breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["href","index.html"],[1,"fi","fi-rr-home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-xxl-6","col-lg-6","col-6"],[1,""],[1,"card"],[1,"card-header","d-flex","align-items-center","justify-content-between","border-0","pb-0"],[1,"clearfix"],[1,"d-none","d-lg-flex","align-items-center","gap-2","position-relative"],["type","checkbox","id","desktop-fab-check",1,"fab-check"],["for","desktop-fab-check",1,"btn","btn-primary","waves-effect","waves-light"],[1,"fi","fi-rr-plus","me-1"],[1,"fab-options","d-flex","flex-column",2,"bottom","auto","top","100%","right","0","left","auto","transform-origin","top right","z-index","1050"],["routerLink","/busetas",1,"fab-option"],[1,"fab-label"],[1,"fab-option-icon"],["routerLink","/nueva",1,"fab-option"],[1,"fab-option",3,"click"],[1,"fab-label","text-warning"],[1,"card-body","py-0","d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-center","gap-2"],[1,"mb-0"],["id","chartContacts",1,"mb-n4","mt-n3"],[1,"card-footer","border-0","pt-0","mt-n1"],[1,"border-top","pb-2"],[1,"d-flex","align-items-center","justify-content-between"],[1,"btn-link"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.5","d","M3.33301 9.375C2.98783 9.375 2.70801 9.65483 2.70801 10C2.70801 10.3452 2.98783 10.625 3.33301 10.625V9.375ZM3.33301 10.625H16.6663V9.375H3.33301V10.625Z","fill","var(--bs-primary)"],["d","M11.667 5L16.667 10L11.667 15","stroke","var(--bs-primary)","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"col-12"],[1,"card","overflow-hidden","bg-primary","border-0","ovarlay-primary-gradient",2,"background-image","url(assets/images/auth/auth-frame.webp)","background-position","center","background-size","cover","min-height","200px"],[1,"card-header","pb-3","border-0","d-flex","align-items-center","justify-content-between","z-1","position-relative"],[1,"card-title","mb-0","text-white","d-none","d-lg-block"],[1,"d-flex","d-lg-none","gap-4","align-items-center","h-100"],[1,"d-flex","flex-column","align-items-center"],[1,"text-white","fw-bold","fs-3"],[1,"badge","bg-white","text-primary","rounded-pill","px-3","py-1"],[1,"card-body","pt-0","border-light","border-bottom","border-opacity-10","d-none","d-lg-block"],[1,"mb-5","mt-n3","z-n1","position-relative"],["id","statusChart"],[1,"px-4","mb-3","d-flex","align-items-start","justify-content-between"],[1,"mb-0","text-white"],[1,"text-white","text-opacity-50","mb-0"],[1,"col-xxl-12"],[1,"card","overflow-hidden"],[1,"card-header","d-flex","flex-wrap","gap-3","align-items-center","justify-content-between","border-0","pb-0"],[1,"card-title","mb-0"],[1,"d-flex","flex-wrap","gap-2"],["id","dt_NewCustomers_Search"],["type","button","routerLink","/inspections",1,"btn","btn-primary","waves-effect","waves-light"],[1,"fi","fi-rr-eye","text-2xs","me-1"],[1,"card-body","px-1","pt-2","pb-2"],[1,"table-responsive"],["id","dt_NewCustomers",1,"table","table-sm","display","table-row-rounded","data-row-checkbox"],[1,"table-light"],[1,"pe-0"],[1,"form-check"],["data-row-checkbox","","type","checkbox",1,"form-check-input"],[1,"minw-200px"],[1,"minw-150px"],[1,"minw-125px"],["class","inspection-row",3,"click",4,"ngFor","ngForOf"],[1,"floating-action","d-lg-none"],["type","checkbox","id","fab-check",1,"fab-check"],["for","fab-check",1,"fab"],[1,"fab-icon"],[1,"fab-icon-close"],[1,"fab-options"],[1,"inspection-row",3,"click"],[1,"pe-0",3,"click"],[1,"form-check","p-0","w-auto","d-inline-block","mb-0","mb-n1"],["data-checkbox","","type","checkbox",1,"form-check-input","m-0",3,"click"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-xxs","rounded-circle","me-2"],["alt","Foto del conductor",1,"img-fluid",3,"src"],[1,"badge","badge-lg",3,"ngClass"],[1,"btn-group","float-end",3,"click"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-subtle-primary","btn-sm","btn-shadow","btn-icon","waves-effect","dropdown-toggle"],[1,"fi","fi-rr-menu-dots"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click","routerLink"],[1,"fi","fi-rr-edit","me-2"],["href","javascript:void(0);",1,"dropdown-item","text-danger",3,"click"],[1,"fi","fi-rr-trash","me-2"]],template:function(n,o){n&1&&(e(0,"main",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5)(6,"a",6),c(7,"i",7),i(8," Home "),t()(),e(9,"li",8),i(10,"Dashboard"),t()()()(),e(11,"div",9)(12,"div",10)(13,"div",9)(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"h6"),i(19,"TOTAL REVISIONES"),t()(),e(20,"div",15),c(21,"input",16),e(22,"label",17),c(23,"i",18),i(24," Nueva inspeccion "),t(),e(25,"div",19)(26,"a",20)(27,"span",21),i(28,"Busetas"),t(),e(29,"span",22),i(30,"1"),t()(),e(31,"a",23)(32,"span",21),i(33,"Camioneta"),t(),e(34,"span",22),i(35,"2"),t()(),e(36,"a",24),d("click",function(){return o.pending()}),e(37,"span",25),i(38,"Pesados"),t(),e(39,"span",22),i(40,"3"),t()()()()(),e(41,"div",26)(42,"div",27)(43,"h2",28),i(44),f(45,"number"),t()(),c(46,"div",29),t(),e(47,"div",30),c(48,"div",31),e(49,"div",32)(50,"p",28),i(51),f(52,"number"),t(),e(53,"a",33),S(),e(54,"svg",34),c(55,"path",35)(56,"path",36),t()()()()()()()(),y(),e(57,"div",10)(58,"div",9)(59,"div",37)(60,"div",38)(61,"div",39)(62,"h6",40),i(63,"Distribuci\xF3n"),t(),e(64,"div",41)(65,"div",42)(66,"span",43),i(67,"1"),t(),e(68,"span",44),i(69,"A"),t()(),e(70,"div",42)(71,"span",43),i(72,"0"),t(),e(73,"span",44),i(74,"R"),t()()()(),e(75,"div",45)(76,"div",46),c(77,"div",47),t(),e(78,"div",48)(79,"div",42)(80,"h3",49),i(81,"1"),t(),e(82,"p",50),i(83,"Aprobadas"),t()(),e(84,"div",42)(85,"h3",49),i(86,"0"),t(),e(87,"p",50),i(88,"Rechazadas"),t()()()()()()()(),e(89,"div",51)(90,"div",52)(91,"div",53)(92,"h6",54),i(93,"Inspecciones recientes"),t(),e(94,"div",55),c(95,"div",56),e(96,"button",57),c(97,"i",58),i(98," Ver todas "),t()()(),e(99,"div",59)(100,"div",60)(101,"table",61)(102,"thead",62)(103,"tr")(104,"th",63)(105,"div",64),c(106,"input",65),t()(),e(107,"th",66),i(108,"Conductor"),t(),e(109,"th",67),i(110,"Placa del veh\xEDculo"),t(),e(111,"th",67),i(112,"Telefono"),t(),e(113,"th",68),i(114,"Fecha"),t(),e(115,"th"),i(116,"Status"),t(),e(117,"th"),i(118,"Accion"),t()()(),e(119,"tbody"),P(120,q,33,20,"tr",69),f(121,"async"),t()()()()()()()(),e(122,"div",70),c(123,"input",71),e(124,"label",72)(125,"span",73),i(126,"+"),t(),e(127,"span",74),i(128,"\xD7"),t()(),e(129,"div",75)(130,"a",20)(131,"span",21),i(132,"Busetas"),t(),e(133,"span",22),i(134,"1"),t()(),e(135,"a",23)(136,"span",21),i(137,"Camioneta"),t(),e(138,"span",22),i(139,"2"),t()(),e(140,"a",24),d("click",function(){return o.pending()}),e(141,"span",25),i(142,"Pesados"),t(),e(143,"span",22),i(144,"3"),t()()()()()),n&2&&(l(44),u(h(45,3,o.totalInspections,"1.0-0")),l(7),x("\xDAltimas del mes: ",h(52,6,o.currentMonthInspections,"1.0-0")),l(69),b("ngForOf",k(121,9,o.RealtimeInspectionsService.inspections$)))},dependencies:[z,V,D,L,F,T,j,H,R],styles:[".inspection-row[_ngcontent-%COMP%]{transition:all .3s ease;cursor:pointer}.inspection-row[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a;z-index:1;position:relative}.inspection-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#fff;transition:background-color .3s ease}.inspection-row[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#f8f9fa}.btn[_ngcontent-%COMP%]{cursor:pointer}.badge[_ngcontent-%COMP%]{padding:.5em .8em;font-size:.85em;font-weight:500;border-radius:.25rem}.badge.bg-soft-primary[_ngcontent-%COMP%]{background-color:#0d6efd1a;color:#0d6efd}",".floating-action[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;z-index:1000}.fab[_ngcontent-%COMP%]{width:56px;height:56px;background-color:var(--bs-primary);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:2rem;font-weight:300;cursor:pointer;box-shadow:0 2px 10px #0003;transition:all .3s ease;-webkit-user-select:none;user-select:none;position:relative}.fab[_ngcontent-%COMP%]:hover{background-color:var(--bs-primary);transform:scale(1.1)}.fab-icon-close[_ngcontent-%COMP%]{position:absolute;opacity:0;transform:rotate(-45deg);transition:all .3s ease}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%]{opacity:0;transform:rotate(45deg)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]   .fab-icon-close[_ngcontent-%COMP%]{opacity:1;transform:rotate(0)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]{background-color:var(--bs-primary)}.fab-check[_ngcontent-%COMP%]:checked + .fab[_ngcontent-%COMP%]:hover{background-color:var(--bs-primary)}.fab-check[_ngcontent-%COMP%]{display:none}.fab-options[_ngcontent-%COMP%]{position:absolute;bottom:70px;right:0;opacity:0;transform:scale(0);transform-origin:bottom right;transition:all .3s ease;display:flex;flex-direction:column;gap:10px}.fab-check[_ngcontent-%COMP%]:checked ~ .fab-options[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.fab-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;text-decoration:none;color:#333}.fab-label[_ngcontent-%COMP%]{background:#fff;padding:8px 12px;border-radius:20px;margin-right:10px;font-size:.85rem;white-space:nowrap;box-shadow:0 2px 5px #0000001a}.fab-option-icon[_ngcontent-%COMP%]{width:40px;height:40px;background-color:var(--bs-primary);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}@media(min-width:992px){.floating-action[_ngcontent-%COMP%]{display:none}}"]})};export{A as Home};
